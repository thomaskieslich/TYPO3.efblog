page.includeCSS.tx_efblog = EXT:efblog/Resources/Public/CSS/extension.css
page.includeJS.jquery_cookie = EXT:efblog/Resources/Public/JS/jquery.cookie.js
page.includeJS.tx_efblog = EXT:efblog/Resources/Public/JS/extension.js

plugin.tx_efblog{
	settings {
		##targets
		listUid =
		detailUid =
		searchUid =
		categoryUid =
		dateMenuUid =
		backUid =

		blogTitle = efblog

		//Admin roles
		superAdminGroup = 4


		//Page
		replaceTitle = 1
		replaceDescription = 1
		replaceKeywords = 1
		replaceAuthor = 1

		listView{
			//Sorting
			orderBy = date,title
			//asc, desc
			sortDirection = desc
			maxEntries = 100
			//active,archived or empty for all
			displayArchived =
			//days for auto archive
			daysToArchive =
			//or, notor, notand, and
			categoryMode =
			category =
			hideNoCategorized =  0

			//Teaser Rendering
			cropText = 300
			images = 4
			imageWidth = 80m
			imageHeight =

			//Pager
			itemsPerPage = 10
			insertAbove = 1
			insertBelow = 1
			maxPages = 5

			//Search
			searchFields = title, content.header, content.bodytext
		}

		detailView{
			showBreadCrumb = 1
			divType = div
			hideDivider = 1
			showSocial = 1
			closeCommentsAfter = 120
		}

		openGraph {
			allowOpenGraph = 0
			type = article
			cropDescription = 280
			defaultImage = typo3conf/ext/efblog/Resources/Public/Icons/openGraphDefault.png
			admins =
			appId =
			latitude =
			longitude =
			locality =
			region =
			country-name =
		}

		comments{
			allowComments = 1
			//Gravatar
			defaultGravatar = typo3conf/ext/efblog/Resources/Public/Icons/gravatar_default.png
			gravatarSize = 50m

			messageSuperAdmin = 1
			messageAuthor = 1
			messageSender = admin@example.org
			messageSenderName = Blog admin
			messageHtml = 1
			messsageHtmlTemplate = Message/Comment.html
			messsageTextTemplate = Message/Comment.txt
			messageAllSpam = 1

			//Spam protection
			spam{
				//if shorter 20 points +
				bodyLength = 20
				bodyStartWith = Interesting, Sorry, Nice, Cool
				keywords = viagra, penis, casino
				keywordMultiplicator = 10
				bodyLinkMultiplicator = 5
				websiteLength = 30
				blockedIps =
				ipPoints = 60

				spampointsToHide = 55
				spampointsToDie = 99
			}
		}

		latestPostsWidget{
			//Sorting
			orderBy = date,title
			//asc, desc
			sortDirection = desc
			maxEntries = 10
			cropLink = 44
			showViews = 1
		}

		latestCommentsWidget{
			
			maxEntries = 12
			cropLink = 33
			showGravatar = 1
		}

		viewsWidget{
			maxEntries = 10
			cropLink = 44
		}

		categoryWidget{
			cropLink = 44
			viewCounts = 1
			viewEmpty   = 1
		}

		searchWidget{
		}

		dateMenuWidget{
			//Sorting
			orderBy = date
			//asc, desc
			sortDirection = desc
		}
		rss{
			maxEntries = 25
			title = Blog RSS
			description = RSS for Blog
			blogUrl = 
			atomUrl = 
			image = 
		}
	}
	widgets{
		latestPostsWidget = USER
		latestPostsWidget{
			userFunc = tx_extbase_core_bootstrap->run
			pluginName = Fe1
			extensionName = Efblog
			switchableControllerActions {
				Post {
				1 = latestPostsWidget
				}
			}
			settings =< plugin.tx_efblog.settings
			persistence =< plugin.tx_efblog.persistence
			view =< plugin.tx_efblog.view
		}

		latestCommentsWidget = USER
		latestCommentsWidget{
			userFunc = tx_extbase_core_bootstrap->run
			pluginName = Fe1
			extensionName = Efblog
			switchableControllerActions {
				Comment {
				1 = latestCommentsWidget
				}
			}
			settings =< plugin.tx_efblog.settings
			persistence =< plugin.tx_efblog.persistence
			view =< plugin.tx_efblog.view
		}

		viewsWidget = USER
		viewsWidget{
			userFunc = tx_extbase_core_bootstrap->run
			pluginName = Fe1
			extensionName = Efblog
			switchableControllerActions {
				Post {
				1 = viewsWidget
				}
			}
			settings =< plugin.tx_efblog.settings
			persistence =< plugin.tx_efblog.persistence
			view =< plugin.tx_efblog.view
		}

		searchWidget = USER
		searchWidget{
			userFunc = tx_extbase_core_bootstrap->run
			pluginName = Fe1
			extensionName = Efblog
			switchableControllerActions {
				Post {
				1 = searchWidget
				}
			}
			settings =< plugin.tx_efblog.settings
			persistence =< plugin.tx_efblog.persistence
			view =< plugin.tx_efblog.view
		}

		categoryWidget = USER
		categoryWidget{
			userFunc = tx_extbase_core_bootstrap->run
			pluginName = Fe1
			extensionName = Efblog
			switchableControllerActions {
				Category {
				1 = categoryWidget
				}
			}
			settings =< plugin.tx_efblog.settings
			persistence =< plugin.tx_efblog.persistence
			view =< plugin.tx_efblog.view
		}

		dateMenuWidget = USER
		dateMenuWidget{
			userFunc = tx_extbase_core_bootstrap->run
			pluginName = Fe1
			extensionName = Efblog
			switchableControllerActions {
				Post {
				1 = dateMenuWidget
				}
			}
			settings =< plugin.tx_efblog.settings
			persistence =< plugin.tx_efblog.persistence
			view =< plugin.tx_efblog.view
		}
	}

	persistence{
		storagePid = {$plugin.tx_efblog.persistence.storagePid}
		classes{
			Tx_Efblog_Domain_Model_Content{
				mapping {
					tableName = tt_content
					columns{
						CType.mapOnProperty = ctype
					}
				}
			}
		Tx_Extbase_Domain_Model_FrontendUser {
			subclasses {
				Tx_Efblog_Domain_Model_Administrator = Tx_Efblog_Domain_Model_Administrator
			}
		}
		Tx_Efblog_Domain_Model_Administrator {
			mapping {
				tableName = fe_users
				recordType = Tx_Efblog_Domain_Model_Administrator
			}
		}
		}
	}

	view {
		templateRootPath = {$plugin.tx_efblog.view.templateRootPath}
		partialRootPath = {$plugin.tx_efblog.view.partialRootPath}
		layoutRootPath = {$plugin.tx_efblog.view.layoutRootPath}
		}

	renderElement = COA
	renderElement {
				10 = RECORDS
				10 {
					source.field = uid
					tables = tt_content
					conf.tt_content < tt_content
				}
			}
	}

//RSS
postRss = PAGE
postRss {
  typeNum = 100
  10 = USER
  10 {
	userFunc = tx_extbase_core_bootstrap->run
	pluginName = Fe1
	extensionName = Efblog
	switchableControllerActions {
		Post {
			1 = postRss
		}
	}
	settings =< plugin.tx_efblog.settings
	persistence =< plugin.tx_efblog.persistence
	view =< plugin.tx_efblog.view
  }

  config {
	disableAllHeaderCode = 1
	additionalHeaders = Content-type:application/xml
	xhtml_cleaning = 0
	admPanel = 0
  }
}

commentsRss = PAGE
commentsRss {
  typeNum = 101
  10 = USER
  10 {
	userFunc = tx_extbase_core_bootstrap->run
	pluginName = Fe1
	extensionName = Efblog
	switchableControllerActions {
		Post {
			1 = commentsRss
		}
	}
	settings =< plugin.tx_efblog.settings
	persistence =< plugin.tx_efblog.persistence
	view =< plugin.tx_efblog.view
  }

	config {
	disableAllHeaderCode = 1
	additionalHeaders = Content-type:application/xml
	xhtml_cleaning = 0
	admPanel = 0
  }

}
