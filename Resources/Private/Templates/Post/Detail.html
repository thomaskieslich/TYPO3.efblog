{namespace tk=Tx_Tkblog_ViewHelpers}
<f:layout name="default" />
<f:section name="content">
	<f:flashMessages renderMode="div" />
	<f:if condition="{post}">
	{post.title -> f:if(condition: '{settings.replaceTitle}') -> tk:document.title(mode: 'replace')}
	{post.tags -> f:if(condition: '{settings.replaceTitle}') -> tk:document.keywords()}
	{description -> f:if(condition: '{settings.replaceTitle}') 
					->	f:format.crop(maxCharacters: '200', append: '{f:translate(key : "teaser_more")}', respectHtml: 0) 
					->tk:document.description()}

		<f:link.page pageUid="{backPid}" additionalParams="{tx_tkblog_fe1: getVars}">{f:translate(key : 'link_backTo')} {backTitle}</f:link.page><br>



		<f:if condition="{pagerEnabled}">
			<f:then>
				<f:if condition="{pages -> f:count()} > 1">
					<f:link.action action="detail" arguments="{post : post, page : 0, backPid:backPid}" additionalParams="{tx_tkblog_fe1: getVars}">not paginated</f:link.action> <br>
					
					<f:for each="{pages}" as="pageTitle" key="pageNumber">
						<f:link.action action="detail" arguments="{post : post, page : pageNumber, backPid:backPid}" additionalParams="{tx_tkblog_fe1: getVars}">							
							<f:if condition="{pageTitle}">
								<f:then>{pageTitle}</f:then>
								<f:else>page {pageNumber}</f:else>
							</f:if>
							|
							</f:link.action> 
					</f:for>
				</f:if>			
				<f:for each="{elements}" as="element">
					<f:cObject typoscriptObjectPath="plugin.tx_tkblog.renderElement" data="{element}" />
				</f:for>
			</f:then>
			<f:else> 
				<f:link.action action="detail" arguments="{post : post, page : 1, backPid:backPid}" additionalParams="{tx_tkblog_fe1: getVars}">paginated</f:link.action> <br>
				<f:for each="{elements}" as="element">
					<f:cObject typoscriptObjectPath="plugin.tx_tkblog.renderElement" data="{element}" />
				</f:for>
			</f:else>
		</f:if>

		<f:link.external uri="{backURI}">{f:translate(key : 'link_backToList')}</f:link.external>
	</f:if>
</f:section>