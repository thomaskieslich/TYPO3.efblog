{namespace tk=ThomasKieslich\Efblog\ViewHelpers}
<div class="header">
	<div class="gravatar">
		<f:if condition="{comment.avatar}">
			<f:then>
				<f:if condition="{comment.website}">
					<f:then>
						<f:link.external uri="{comment.website}" target="_blank">
							<f:image src="uploads/pics/{comment.avatar}" alt="{comment.author}" width="{settings.comments.gravatarSize}c" height="{settings.comments.gravatarSize}c" class="tx-efblog-gravatar"/>
						</f:link.external>
					</f:then>
					<f:else>
						<f:image src="uploads/pics/{comment.avatar}" alt="{comment.author}" width="{settings.comments.gravatarSize}c" height="{settings.comments.gravatarSize}c" class="tx-efblog-gravatar"/>
					</f:else>
				</f:if>
			</f:then>
			<f:else>
				<f:if condition="{comment.website}">
					<f:then>
						<f:link.external uri="{comment.website}" target="_blank">
							<tk:gravatar emailAddress="{comment.email}" defaultImageUri="{settings.comments.defaultGravatar}" size="{settings.comments.gravatarSize}m" class="tx-efblog-gravatar"/>
						</f:link.external>
					</f:then>
					<f:else>
						<tk:gravatar emailAddress="{comment.email}" defaultImageUri="{settings.comments.defaultGravatar}" size="{settings.comments.gravatarSize}m" class="tx-efblog-gravatar"/>
					</f:else>
				</f:if>
			</f:else>
		</f:if>

	</div>
	<div class="number">
		<a name="comment_{comment.uid}">#{comIterator.cycle}</a>
	</div>
	<div class="author">
		{f:if(condition: '{comment.website}',
		then: "{comment.author -> f:link.external(uri: '{comment.website}', target: '_blank')}",
		else: '{comment.author}')}
		{f:translate(key : 'comments_wrote')}
		{comment.date -> f:format.date(format:'d.m.Y, H:m')}
		{f:if(condition: '{comment.location}',
		then: "<br>{f:translate(key : 'comments_from')} {comment.location}")}

		<f:if condition="{isMainComment}">
			<f:link.action action="detail" section="comments_form">
				<br>{f:translate(key : 'comments_reply')}
			</f:link.action>
		</f:if>
	</div>
</div>
<div class="comment">
	{f:if(condition: '{comment.title}',
	then: "<h2>{comment.title}</h2>")}
	{comment.message -> f:format.html()}
</div>